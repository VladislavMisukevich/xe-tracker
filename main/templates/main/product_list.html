{% extends "main/base.html" %}
{% block title %}–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}

{% block content %}
<div class="card p-4 shadow-sm">
    <h1 class="mb-4">üìò –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h1>

    <form method="get" class="row g-2 mb-4">
        <div class="col-md-6">
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞..." value="{{ request.GET.q }}" class="form-control">
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-outline-primary">üîç –ù–∞–π—Ç–∏</button>
        </div>
        {% if request.GET.q %}
        <div class="col-md-2">
            <a href="{% url 'product_list' %}" class="btn btn-outline-secondary">‚úñ –°–±—Ä–æ—Å–∏—Ç—å</a>
        </div>
        {% endif %}
    </form>

    <div class="mb-3">
        <strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</strong>
        <a href="?sort=name{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">–ê-–Ø</a> |
        <a href="?sort=-name{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">–Ø-–ê</a> |
        <a href="?sort=carbs{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">–£–≥–ª–µ–≤–æ–¥—ã ‚Üë</a> |
        <a href="?sort=-carbs{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">–£–≥–ª–µ–≤–æ–¥—ã ‚Üì</a>
    </div>

    <table class="table table-hover table-striped table-bordered table-rounded">
        <thead class="table-light">
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–£–≥–ª–µ–≤–æ–¥—ã (–Ω–∞ 100 –≥)</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
                <tr>
                    <td>{{ product.name }}</td>
                    <td>{{ product.carbs_per_100g }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2" class="text-center text-muted">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <p class="mt-3"><a href="{% url 'calculator' %}">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É</a></p>
</div>
{% endblock %}
