{% extends "main/base.html" %}
{% block title %}–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}

{% block content %}
<div class="card p-4 shadow-sm">
    <h1 class="mb-3">üìò –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h1>
    <p class="text-muted">–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —É–≥–ª–µ–≤–æ–¥–æ–≤ –Ω–∞ 100 –≥.</p>

    <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <form method="get" class="row g-2 align-items-center mb-4">
        <div class="col-md-6">
            <input type="text" name="q" class="form-control form-control-lg rounded" placeholder="üîé –ù–∞–π—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç..." value="{{ request.GET.q }}">
        </div>
        <div class="col-md-auto">
            <button type="submit" class="btn btn-primary btn-lg">üîç –ù–∞–π—Ç–∏</button>
        </div>
        {% if request.GET.q %}
        <div class="col-md-auto">
            <a href="{% url 'product_list' %}" class="btn btn-outline-secondary btn-lg">‚úñ –°–±—Ä–æ—Å–∏—Ç—å</a>
        </div>
        {% endif %}
    </form>

    <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
    <div class="mb-3">
        <strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</strong>
        <a href="?sort=name{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">üî§ –ê-–Ø</a> |
        <a href="?sort=-name{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">üî° –Ø-–ê</a> |
        <a href="?sort=carbs{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">ü•ñ –£–≥–ª–µ–≤–æ–¥—ã ‚Üë</a> |
        <a href="?sort=-carbs{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">ü•ê –£–≥–ª–µ–≤–æ–¥—ã ‚Üì</a>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle shadow-sm">
            <thead class="table-light">
                <tr>
                    <th>ü•ó –ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>‚öñÔ∏è –£–≥–ª–µ–≤–æ–¥—ã (–Ω–∞ 100 –≥)</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                    <tr>
                        <td><strong>{{ product.name }}</strong></td>
                        <td>{{ product.carbs_per_100g }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="2" class="text-center text-muted">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <a href="{% url 'calculator' %}" class="btn btn-outline-dark">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É –•–ï
        </a>
    </div>
</div>
{% endblock %}

{% block extra_head %}
<style>
    .table th, .table td {
        vertical-align: middle;
        font-size: 1.05rem;
    }
    .btn-lg {
        border-radius: 50px;
    }
    input::placeholder {
        font-style: italic;
    }
</style>
{% endblock %}
